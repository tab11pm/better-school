/*! For license information please see form.bundle.js.LICENSE.txt */
!function(){const e=document.querySelector(".form__modal"),t=document.querySelector(".select"),s=document.querySelectorAll("[data-id]"),o=document.querySelector(".form-link"),c=document.querySelector("[data-close]"),r=document.querySelector(".header__menu span"),n=document.querySelector(".header");document.addEventListener("click",(t=>{switch(t.target){case r:document.body.classList.toggle("lock"),n.classList.toggle("_active");break;case c:e.classList.remove("_active")}})),document.addEventListener("keydown",(t=>{"Escape"===t.key&&(document.body.classList.remove("lock"),n.classList.remove("_active"),e.classList.remove("_active"))})),document.addEventListener("DOMContentLoaded",(t=>{const s=document.querySelector(".form__body");if(s){s.addEventListener("submit",(function(c){c.preventDefault();let r=t(s);new FormData(s),0===r?(document.body.classList.add("_sending"),o.classList.add("_active"),setTimeout((()=>{document.body.classList.remove("_sending"),e.classList.add("_active"),e.classList.add("green"),e.querySelector(".form__error").innerHTML=l.ok,setTimeout((()=>{o.scrollIntoView({behavior:"smooth"}),e.classList.remove("_active")}),3e3)}),4e3)):(e.classList.add("_active"),e.querySelector(".form__error").innerHTML=l.inputError,s.scrollIntoView({behavior:"smooth"}),s.classList.remove("_sending"))}));const t=e=>{let t=0,s=document.querySelectorAll("._req");for(let e=0;e<s.length;e++){const o=s[e];r(o),o.classList.contains("_email")?n(o)&&(c(o),t++):""!==o.value||Number.isInteger(o.value)||(c(o),t++)}return t},c=e=>{e.classList.add("_error"),e.parentElement.classList.add("_error")},r=e=>{e.classList.remove("_error"),e.parentElement.classList.remove("_error")},n=e=>!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,8})+$/.test(e.value),l={error:"Ошибка!",ok:"Всё отлично!",inputError:"Заполните поля!"}}})),s.forEach((e=>{e.addEventListener("click",(t=>{s.forEach((e=>e.classList.remove("_active")));const o=+e.dataset.id;for(let e=0;e<o;e++)s[e].classList.add("_active")}))})),t&&$(".select").each((function(){const e=$(this),t=e.find("option"),s=t.length;t.filter(":selected"),e.hide(),e.wrap("<div class='select'></div>"),$("<div>",{class:"new-select",text:e.children("option:disabled").text()}).insertAfter(e);const o=e.next(".new-select");$("<div>",{class:"new-select__list"}).insertAfter(o);const c=o.next(".new-select__list");for(let e=1;e<s;e++)$("<div>",{class:"new-select__item",html:$("<span>",{text:t.eq(e).text()})}).attr("data-value",t.eq(e).val()).appendTo(c);const r=c.find(".new-select__item");c.slideUp(0),o.on("click",(function(){$(this).hasClass("on")?($(this).removeClass("on"),c.slideUp(450)):($(this).addClass("on"),c.slideDown(450),r.on("click",(function(){let e=$(this).data("value");$("select").val(e).attr("selected","selected"),o.text($(this).find("span").text()),c.slideUp(450),o.removeClass("on")})))}))}))}();